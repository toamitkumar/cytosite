<% if Category.children(sub_category).size.zero? %>
  <div class="column">
    <div class="level<%= level %>">
      <h3>
        <%= link_to sub_category.name, "#" %>
      </h3>
    </div>
  </div>
 <% else %>
   <div class="column">
    <div class="level<%= level %>">
        <h3>
          <%= link_to sub_category.name, "#" %>
        </h3>
        <ul>
          <li>
            <%= render :partial => "common/sub_category", :collection => Category.children(sub_category), :locals => {:level =>  level + 1} %>
          </li>
        </ul>
    </div>
  </div>
<% end %>